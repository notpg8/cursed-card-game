(()=>{"use strict";var t={d:(e,r)=>{for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{T:()=>d});class e{constructor(t){this.id=t.id,this.rarity=t.rarity,this.name=t.name,this.description=t.description,this.stats={attack:this.assignRandomStatValue(this.rarity),defense:this.assignRandomStatValue(this.rarity),hp:this.assignRandomStatValue(this.rarity)}}get getCardStats(){return`‚öî ${this.stats.attack} | ‚ô• ${this.stats.hp} `}get getRarityIcon(){switch(this.rarity){case"common":return"‚óè";case"uncommon":return"‚óÜ";case"rare":return"‚òÖ";default:console.log("RARITY ISSUE, NOT MATCHING ANY RARITY")}}get getRarityColor(){switch(this.rarity){case"common":return"gray";case"uncommon":return"rgb(97 131 118)";case"rare":return"gold";default:console.log("RARITY ISSUE, NOT MATCHING ANY RARITY")}}get getIsWeak(){return this.stats.attack<=20||this.stats.hp<=20}get getRandomWeakText(){switch(this.randomNumber(5)){case 1:return"OOF";case 2:return"WHACK";case 3:return"SO BAD";case 4:return"OH NO";case 5:return"WEAK!"}}get getCardDescription(){return this.description}get getCardImagesUrls(){return{front:`./media/cards-pngs-optimized/medium/${this.id}`,back:"./media/cards-pngs-optimized/medium/back/originalback.png"}}get getUnparsedCard(){return this.buildCard()}get getUnparsedCardForDuel(){return this.buildCard()}assignRandomStatValue=t=>{if(t){if("rare"===t)return Math.floor(Math.random()*Math.floor(100))+50;if("uncommon"===t)return Math.floor(Math.random()*Math.floor(60))+30;if("common"===t)return Math.floor(Math.random()*Math.floor(30))+1}};randomNumber=t=>Math.floor(Math.random()*Math.floor(t))+1;buildCss=()=>({cardClasses:`card ${"rare"===this.rarity?this.rarity+" animate-glow":this.rarity} face-down`,cardStyles:{faceUpStyles:`background-image: url('./media/cards-pngs-optimized/medium/${this.id.toString()}.png'); background-image: url('./media/cards-pngs-optimized/medium/${this.id}')${"rare"===this.rarity?", linear-gradient(to right, #BF953F, #FCF6BA, #FBF5B7, #AA771C);":""}; background-color: ${this.getRarityColor}; background-size: cover; width: 100%; height:100%; pointer-events: none; visibility: hidden; position: absolute; z-index: -1;`,faceDownStyles:"background-image: url('./media/cards-pngs-optimized/medium/back/originalback.png'); background-color: rgb(83, 118, 131); background-size: cover;"}});buildCardRarityP=()=>({rarityClasses:`card-rarity ${this.rarity}-card-rarity`});buildCardNotificationSpan=()=>({notificationClasses:"notification-area",notificationStyles:"opacity: 0;"});buildCardStatsP=()=>({statsClasses:`card-stats ${this.rarity}-card-stats`});buildCardFightButton=()=>({fightButtonClasses:"fight-button"});buildCard=()=>{const{cardClasses:t,cardStyles:e}=this.buildCss(),{rarityClasses:r}=this.buildCardRarityP(),{notificationClasses:a,notificationStyles:i}=this.buildCardNotificationSpan(),{statsClasses:s}=this.buildCardStatsP(),{fightButtonClasses:o}=this.buildCardFightButton();return`<div class="${t}" style="${e.faceDownStyles}"><div class="card-image ${this.rarity}-image-filter" style="${e.faceUpStyles}"></div>\n\t\t<p class="${r}">${this.getRarityIcon}\t</p>\n\t\t<span class="${a}" style="${i}">${this.getIsWeak?this.getRandomWeakText:""}</span>\n\t\t<p class="${s}">${this.getCardStats}</p>\n\t\t<button class="${o}" title="Fight!">ü•ä</button>\n\t\t</div>`};buildCardInfoTooltip=()=>{}}var r=io();let a=[];const i=()=>{n(a),l()};r.on("deal-cards",(t=>{a.push(...t),i()}));const s=()=>{document.querySelectorAll(".card").forEach((t=>{t.style.transform="scale(1)",t.style.zIndex=0,t.style.position="relative"}))},o=t=>{if(t.target.classList.contains("card")){const e=t.target.style;s(),l(),e.transform="scale(1.6)",e.zIndex=2,t.target.firstChild.style.visibility="visible",t.target.querySelector(".notification-area")&&y(t),m(t)}r.emit("chat","fuck you")},c=t=>{const e=document.createElement("DIV");return e.innerHTML=t,e.firstChild},n=t=>{const r=document.querySelector(".play-area"),a=document.querySelector(".opponent-card-duel"),i=document.querySelector(".own-card-duel");t.map(((t,s)=>{if(0===s){const r=new e(t);i.appendChild(c(r.getUnparsedCardForDuel))}if(1===s){const r=new e(t);a.appendChild(c(r.getUnparsedCardForDuel))}const o=new e(t),n=c(o.getUnparsedCard);r.appendChild(n),n.addEventListener("click",(function(){u(o)}))})),document.querySelectorAll(".card").forEach((t=>{t.addEventListener("click",o)}))},l=()=>{const t=document.querySelectorAll(".common"),e=document.querySelectorAll(".uncommon"),r=document.querySelectorAll(".rare"),a=document.querySelectorAll(".back"),i=t=>{t.forEach((t=>{const e=Math.random()<.5?-1:1,r=(Math.floor(Math.random()*Math.floor(2.5))+1)*e;t.style.transform=`rotate(${r}deg)`}))};i(t),i(e),i(r),i(a)},d=()=>{document.querySelector(".duel-cards").querySelectorAll(".card").forEach((t=>{t.classList.remove("face-down"),t.classList.add("face-up"),t.querySelector(".card-rarity").style.visibility="visible",t.querySelector(".card-stats").style.visibility="visible",t.querySelector(".card-image").style.visibility="visible"}))},u=t=>{const e=document.querySelectorAll(".card-description");e&&e.forEach((t=>t.remove()));const r=document.querySelector(".card-info-tooltip"),a=document.createElement("H2"),i=document.createElement("P"),s=document.createElement("P");a.classList.add("card-name","card-description"),i.classList.add("card-description"),s.classList.add("card-description"),a.appendChild(document.createTextNode(t.name.substring(0,t.name.indexOf(".")).toUpperCase())),i.appendChild(document.createTextNode(t.description)),s.appendChild(document.createTextNode(`${t.getRarityIcon} ${t.rarity.toUpperCase()} | ATTACK: ${t.stats.attack} | HP: ${t.stats.hp}`)),r.appendChild(a),r.appendChild(i),r.appendChild(s)},y=t=>{t.target.querySelector(".notification-area").setAttribute("style","opacity: 1;"),setTimeout((()=>{t.target.querySelector(".notification-area").setAttribute("style","opacity: 0;")}),700)},m=t=>t.target.classList.value.includes("face-down")?(t.target.classList.remove("face-down"),t.target.classList.add("face-up"),t.target.querySelector(".card-rarity").style.visibility="visible",t.target.querySelector(".card-stats").style.visibility="visible",t.target.querySelector(".notification-area").style.visibility="visible",t.target.querySelector(".card-image").style.visibility="visible",void(t.target.querySelector(".fight-button").style.visibility="visible")):null;(()=>{const t=document.querySelector(".server-status");t.innerHTML="üü¢ &nbsp;",t.setAttribute("style","vertical-align: top; font-size: 0.4rem")})(),document.querySelector(".populate-cards").addEventListener("click",(()=>{r.emit("request-new-cards",(t=>{a=[],a.push(...t),i()}))})),document.querySelector(".delete-cards").addEventListener("click",(()=>{const t=document.querySelector(".play-area");for(;t.firstChild;)t.removeChild(t.firstChild);document.querySelector(".populate-cards").removeAttribute("disabled"),(()=>{const t=document.querySelectorAll(".card-description");t&&t.forEach((t=>t.remove()))})()})),document.querySelector(".reveal-all-cards").addEventListener("click",(()=>{document.querySelectorAll(".card").forEach((t=>{t.classList.remove("face-down"),t.classList.add("face-up"),t.querySelector(".card-rarity").style.visibility="visible",t.querySelector(".card-stats").style.visibility="visible",t.querySelector(".card-image").style.visibility="visible",t.querySelector(".notification-area")&&(t.querySelector(".notification-area").style.visibility="visible")}))})),document.querySelector(".duel-page-button").addEventListener("click",(()=>{const t=document.querySelector(".duel-page");"visible"===t.style.visibility?(t.style.visibility="hidden",d()):t.style.visibility="visible"})),document.addEventListener("click",(t=>{"board"!==t.target.className&&"play-area"!==t.target.className||s()}))})();