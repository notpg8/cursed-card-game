(()=>{var e=io();let t=[];const r=()=>{c(t),a()};e.on("deal-cards",(e=>{console.log("cardsFromServer ",e),t.push(...e),r()}));const d=t=>{const r=t.target.style;document.querySelectorAll(".card").forEach((e=>{e.style.scale=1,e.style.zIndex=0,e.style.position="relative"})),a(),r.transform="scale(1.5)",r.zIndex=10,t.target.firstChild.style.visibility="visible",e.emit("chat","fuck you")},c=e=>{const t=document.querySelector(".play-area");e.map((e=>{const r=document.createElement("DIV");r.classList.add("card",e.rarity),r.setAttribute("draggable","true"),r.setAttribute("style",`background-size: 100%; background-image: url("./media/cards-pngs-optimized/medium/${e.imageId.toString()}.png"), linear-gradient(to right, #BF953F, #FCF6BA, #FBF5B7, #AA771C);`),t.appendChild(r),(e=>{const t=document.createElement("P");t.classList.add("card-info-text"),t.style.visibility="visible","back"===e.classList[1]&&(t.appendChild(document.createTextNode("Smarpft™")),e.appendChild(t),t.style.visibility="visible"),"common"===e.classList[1]?(t.appendChild(document.createTextNode("●")),e.appendChild(t)):"rare"===e.classList[1]?(t.appendChild(document.createTextNode("★")),e.appendChild(t)):"uncommon"===e.classList[1]&&(t.appendChild(document.createTextNode("◆")),e.appendChild(t))})(r)})),l(),o(),document.querySelectorAll(".card").forEach((e=>e.addEventListener("click",d)))},l=()=>{document.querySelector(".populate-cards").setAttribute("disabled","true")},o=()=>{document.querySelector(".delete-cards").removeAttribute("disabled")},a=()=>{const e=document.querySelectorAll(".common"),t=document.querySelectorAll(".uncommon"),r=document.querySelectorAll(".rare"),d=document.querySelectorAll(".back"),c=e=>{e.forEach((e=>{const t=Math.random()<.5?-1:1,r=(Math.floor(Math.random()*Math.floor(2.5))+1)*t;e.style.transform=`rotate(${r}deg)`}))};c(e),c(t),c(r),c(d)};document.querySelector(".populate-cards").addEventListener("click",r),document.querySelector(".delete-cards").addEventListener("click",(()=>{const e=document.querySelector(".play-area");for(;e.firstChild;)e.removeChild(e.firstChild);document.querySelector(".populate-cards").removeAttribute("disabled"),document.querySelector(".delete-cards").setAttribute("disabled","true")}))})();