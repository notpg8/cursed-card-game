(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Nz:()=>n,Wb:()=>a});class t{constructor(e){this.id=e.id,this.rarity=e.rarity,this.name=e.name,this.description=e.description,this.stats=e.stats}get getCardStats(){return`‚öî ${this.stats.attack} | ‚ô• ${this.stats.hp} `}get getRarityIcon(){switch(this.rarity){case"common":return"‚óè";case"uncommon":return"‚óÜ";case"rare":return"‚òÖ";default:throw new Error("RARITY ISSUE, NOT MATCHING ANY RARITY")}}get getRarityColor(){switch(this.rarity){case"common":return"gray";case"uncommon":return"rgb(0 167 212);";case"rare":return"gold";default:throw new Error("RARITY ISSUE, NOT MATCHING ANY RARITY")}}get getIsWeak(){return this.stats.attack<=20||this.stats.hp<=20}get getRandomWeakText(){switch(this.randomNumber(5)){case 1:return"OOF";case 2:return"WHACK";case 3:return"SO BAD";case 4:return"OH NO";case 5:return"WEAK!";default:return"F"}}get getCardDescription(){return this.description}get getCardImagesUrls(){return{front:`./media/cards-pngs-optimized/medium/${this.name}`,back:"./media/cards-pngs-optimized/medium/back/originalback.png"}}get getUnparsedCard(){return this.buildCard()}get getUnparsedCardForDuel(){return this.buildCardForDuel()}randomNumber=e=>Math.floor(Math.random()*Math.floor(e))+1;buildCss=()=>{const e=", linear-gradient(to right, #BF953F, #FCF6BA, #FBF5B7, #AA771C);";return{cardClasses:`card ${"rare"===this.rarity?this.rarity+" animate-glow":this.rarity} face-down`,cardStyles:{faceUpStyles:`background-image: url('${this.getCardImagesUrls.back}'); background-image: url('${this.getCardImagesUrls.front}')${"rare"===this.rarity?e:""}; background-color: ${this.getRarityColor}; background-size: cover; width: 100%; height:100%; pointer-events: none; visibility: hidden; position: absolute; z-index: -1;`,faceDownStyles:`background-image: url('${this.getCardImagesUrls.back}'); background-size: cover; background-color: rgb(45 73 121);;`},duelCardStyles:{duelFaceUpStyles:`background-image: url('${this.getCardImagesUrls.front}')${"rare"===this.rarity?e:""}; background-color: ${this.getRarityColor}; background-size: cover; width: 100%; height:100%; pointer-events: none; position: absolute; z-index: -1;`,duelFaceDownStyles:""}}};buildCardRarityP=()=>({rarityClasses:`card-rarity ${this.rarity}-card-rarity`});buildCardNotificationSpan=()=>({notificationClasses:"notification-area",notificationStyles:"opacity: 0;"});buildCardStatsP=()=>({statsClasses:`card-stats ${this.rarity}-card-stats`});buildCardFightButton=()=>({fightButtonClasses:"fight-button"});buildCard=()=>{const{cardClasses:e,cardStyles:t}=this.buildCss(),{rarityClasses:r}=this.buildCardRarityP(),{notificationClasses:a,notificationStyles:s}=this.buildCardNotificationSpan(),{statsClasses:i}=this.buildCardStatsP(),{fightButtonClasses:o}=this.buildCardFightButton();return`<div id="${this.id}" class="${e}" style="${t.faceDownStyles}"><div class="card-image ${this.rarity}-image-filter" style="${t.faceUpStyles}"></div>\n\t\t<p class="card-name" hidden>${this.name}</p>\n\t\t<p class="${r}">${this.getRarityIcon}</p>\n\t\t<span class="${a}" style="${s}">${this.getIsWeak?this.getRandomWeakText:""}</span>\n\t\t<p class="${i}">${this.getCardStats}</p>\n\t\t<button class="${o}" title="Fight!">ü•ä</button>\n\t\t</div>`};buildCardForDuel=()=>{const{cardClasses:e,duelCardStyles:t}=this.buildCss(),{rarityClasses:r}=this.buildCardRarityP(),{notificationClasses:a,notificationStyles:s}=this.buildCardNotificationSpan(),{statsClasses:i}=this.buildCardStatsP(),{fightButtonClasses:o}=this.buildCardFightButton();return`<div id="${this.id}" class="${e}" style="${t.duelFaceUpStyles}"><div class="card-image ${this.rarity}-image-filter" style="${t.duelFaceUpStyles}"></div>\n\t\t<p class="card-name" hidden>${this.name}</p>\n\t\t<p class="${r}">${this.getRarityIcon}</p>\n\t\t<span class="${a}" style="${s}">${this.getIsWeak?this.getRandomWeakText:""}</span>\n\t\t<p class="${i}">${this.getCardStats}</p>\n\t\t<button class="${o}" title="Fight!">ü•ä</button>\n\t\t</div>`};buildCardInfoTooltip=()=>{}}const r=(e=300)=>{document.querySelector(".transition-page").style.opacity=1,setTimeout((()=>{document.querySelector(".transition-page").style.opacity=0}),e)};var a=io();let s=[];const i=()=>{c(s),l()};a.on("deal-cards",(e=>{s.push(...e),i()})),a.on("names-result",(e=>{console.log("received names",e);const{nameOfCards:t}=e,r=`${t.own} <span style="color: rgb(165, 33, 33); font-size: 3rem; font-weight: 900;">VS</span> ${t.opponent}`;document.querySelector(".card-names-duel").innerHTML=r.toUpperCase()})),a.on("fight-result",(e=>{const{msg:t}=e;h(t)})),a.on("score",(({own:e,opponent:t})=>{document.querySelector(".score").innerHTML=`${e} - ${t}`,y()})),a.on("game-over",(e=>{setTimeout((()=>{document.querySelector(".game-over-wrapper").style.opacity=1,document.querySelector(".game-over-wrapper").style.pointerEvents="all",document.querySelector(".game-over").innerHTML=`Winner: ${e}`}),1800)})),a.on("start-new-game",(()=>{document.querySelector(".game-over-wrapper").style.pointerEvents="none"}));const o=e=>{if(e.target.classList.contains("card")){const t=e.target.style;document.querySelectorAll(".card").forEach((e=>{e.style.transform="scale(1)",e.style.zIndex=0,e.style.position="relative"})),l(),t.transform="scale(1.6)",t.zIndex=2,e.target.firstChild.style.visibility="visible",e.target.querySelector(".notification-area")&&m(e),p(e)}a.emit("chat","fuck you")},n=e=>{const t=document.createElement("DIV");return t.innerHTML=e,t.firstChild},c=e=>{const r=document.querySelector(".play-area");e.map((e=>{const a=new t(e),s=n(a.getUnparsedCard);r.appendChild(s),s.addEventListener("click",(function(){u(a)})),s.querySelector(".fight-button").addEventListener("click",g)})),document.querySelectorAll(".card").forEach((e=>{e.addEventListener("click",o)}))},l=()=>{const e=document.querySelectorAll(".common"),t=document.querySelectorAll(".uncommon"),r=document.querySelectorAll(".rare"),a=document.querySelectorAll(".back"),s=e=>{e.forEach((e=>{const t=Math.random()<.5?-1:1,r=(Math.floor(Math.random()*Math.floor(2.5))+1)*t;e.style.transform=`rotate(${r}deg)`}))};s(e),s(t),s(r),s(a)},d=()=>{const e=document.querySelector(".play-area");for(;e.firstChild;)e.removeChild(e.firstChild);document.querySelector(".populate-cards").removeAttribute("disabled"),y()},u=e=>{const t=document.querySelectorAll(".card-description");t&&t.forEach((e=>e.remove()));const r=document.querySelector(".card-info-tooltip"),a=document.createElement("H2"),s=document.createElement("P"),i=document.createElement("P");a.classList.add("card-name","card-description"),s.classList.add("card-description"),i.classList.add("card-description"),a.appendChild(document.createTextNode(e.name.substring(0,e.name.indexOf(".")).toUpperCase())),s.appendChild(document.createTextNode(e.description)),i.appendChild(document.createTextNode(`${e.getRarityIcon} ${e.rarity.toUpperCase()} | ATTACK: ${e.stats.attack} | HP: ${e.stats.hp}`)),r.appendChild(a),r.appendChild(s),r.appendChild(i)},y=()=>{const e=document.querySelectorAll(".card-description");e&&e.forEach((e=>e.remove()))},m=e=>{e.target.querySelector(".notification-area").setAttribute("style","opacity: 1;"),setTimeout((()=>{e.target.querySelector(".notification-area").setAttribute("style","opacity: 0;")}),700)},p=e=>e.target.classList.value.includes("face-down")?(e.target.classList.remove("face-down"),e.target.classList.add("face-up"),e.target.querySelector(".card-rarity").style.visibility="visible",e.target.querySelector(".card-stats").style.visibility="visible",e.target.querySelector(".notification-area").style.visibility="visible",e.target.querySelector(".card-image").style.visibility="visible",void(e.target.querySelector(".fight-button").style.visibility="visible")):null,g=e=>{const s=e.target.parentElement,i=s.querySelector(".card-stats").innerHTML;s.style.transform="scale(1)",s.querySelector("button").remove(),s.querySelector(".card-rarity").style.fontSize="1rem",r(),setTimeout((()=>{document.querySelector(".duel-page").style.opacity=1,document.querySelector(".board").style.pointerEvents="none",document.querySelector("nav").style.pointerEvents="none",a.emit("request-duel",(e=>{const r=e[0],a=new t(r),s=n(a.getUnparsedCardForDuel),i=document.querySelector(".opponent-card-duel"),o=document.querySelector(".own-card-duel");i.appendChild(s),i.querySelector(".card-rarity").style.visibility="visible",i.querySelector(".card-rarity").style.fontSize="1rem";const c=i.querySelector(".card-stats").innerHTML;i.querySelector(".atk-hp-opponent").innerHTML=c;const l=i.querySelector(".card"),d=o.querySelector(".card");l.classList.add("card-duel-animation1"),d.classList.add("card-duel-animation2")}))}),300);const o=document.querySelector(".own-card-duel"),c=document.querySelector(".opponent-card-duel");o.appendChild(s),s.querySelector(".card-stats").remove(),document.querySelector(".atk-hp-self").innerHTML=i,setTimeout((()=>{const e=o.querySelector(".card").getAttribute("id"),t=c.querySelector(".card").getAttribute("id");a.emit("get-card-names",{ownId:e,opponentId:t}),console.log("ids",e,t)}),320),setTimeout((()=>{const e=o.querySelector(".card").getAttribute("id"),t=c.querySelector(".card").getAttribute("id");a.emit("fight",{ownId:e,opponentId:t})}),1400)},h=e=>{document.querySelector(".fight-result").style.opacity=1,document.querySelector(".fight-result").innerHTML=e.toUpperCase(),document.querySelector(".fight-result").classList.add("animate-scale-up-down"),a.on("score",(({own:e,opponent:t})=>{document.querySelector(".score").innerHTML=`${e} - ${t}`})),setTimeout((()=>{document.querySelector(".duel-page").style.opacity=0,document.querySelector(".board").style.pointerEvents="all",document.querySelector("nav").style.pointerEvents="all",document.querySelectorAll(".own-card-duel > div").forEach((e=>e.remove())),document.querySelectorAll(".opponent-card-duel > div").forEach((e=>e.remove())),document.querySelector(".fight-result").classList.remove("animate-scale-up-down")}),2e3),setTimeout((()=>{r()}),1700),setTimeout((()=>{document.querySelector(".fight-result").style.opacity=0}),800)};(()=>{const e=(e=>{const t=document.createElement("DIV");return t.innerHTML=e,t.querySelector(".duel-page")})('<div class="duel-page"><div class="duel-cards"><div class="own-card-duel"><h1 class="atk-hp-self">‚öî ? | ‚ô• ?</h1></div><div class="opponent-card-duel"><h1 class="atk-hp-opponent">‚öî ? | ‚ô• ?</h1></div></div><h2 class="card-names-duel"></h2><div class="duel-page-backgrounds"><div class="own-duel-page skewed"></div><div class="opponent-duel-page skewed"></div></div></div>');document.querySelector(".board").appendChild(e)})(),(()=>{const e=document.querySelector(".server-status");e.innerHTML="üü¢ &nbsp;",e.setAttribute("style","vertical-align: top; font-size: 0.4rem")})(),document.querySelector(".populate-cards").addEventListener("click",(()=>{a.emit("request-new-cards",(e=>{s=[],s.push(...e),i()}))})),document.querySelector(".delete-cards").addEventListener("click",d),document.querySelector(".reveal-all-cards").addEventListener("click",(()=>{document.querySelectorAll(".card").forEach((e=>{e.classList.remove("face-down"),e.classList.add("face-up"),e.querySelector(".card-rarity").style.visibility="visible",e.querySelector(".card-stats").style.visibility="visible",e.querySelector(".card-image").style.visibility="visible",e.querySelector(".fight-button").style.visibility="visible",e.querySelector(".notification-area")&&(e.querySelector(".notification-area").style.visibility="visible")}))})),document.querySelector(".play-again").addEventListener("click",(()=>{a.emit("play-again"),document.querySelector(".game-over-wrapper").style.opacity=0,document.querySelector(".game-over").innerHTML="",s=[],d()}))})();